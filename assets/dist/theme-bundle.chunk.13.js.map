{"version":3,"sources":["webpack:///./assets/js/theme/compare.js","webpack:///./assets/js/theme/global/compare-products.js"],"names":["Compare","this","context","urls","message","compareRemoveMessage","$","on","event","comparisons","length","preventDefault","updateCounterNav","counter","$link","urlContext","is","addClass","attr","compare","join","find","html","removeClass","compareCounter","$compareLink","$checked","map","element","value","triggerHandler","product","currentTarget","$clickedCompareLink","item","checked","push","index","indexOf","splice","decrementCounter"],"mappings":"0FAAA,sFAIe,MAAMA,UAAgB,IACjC,UACI,YAAgBC,KAAKC,QAAQC,MAE7B,MAAMC,EAAUH,KAAKC,QAAQG,qBAE7BC,EAAE,QAAQC,GAAG,QAAS,2BAA4BC,IAC1CP,KAAKC,QAAQO,YAAYC,QAAU,IACnC,YAAeN,GACfI,EAAMG,uB,kDCbtB,uCAeA,SAASC,EAAiBC,EAASC,EAAOC,GACf,IAAnBF,EAAQH,QACHI,EAAME,GAAG,YACVF,EAAMG,SAAS,QAEnBH,EAAMI,KAAK,OAAQ,GAAGH,EAAWI,WAAWN,EAAQO,KAAK,QACzDN,EAAMO,KAAK,kBAAkBC,KAAKT,EAAQH,SAE1CI,EAAMS,YAAY,QAIX,gBACX,IAAIC,EAAiB,GAErB,MAAMC,EAAenB,EAAE,uBAEvBA,EAAE,QAAQC,GAAG,eAAgB,KACzB,MAAMmB,EAAWpB,EAAE,QAAQe,KAAK,oCAEhCG,EAAiBE,EAAShB,OAAS,IAAEiB,IAAID,EAAUE,GAAWA,EAAQC,OAAS,GAC/EjB,EAAiBY,EAAgBC,EAAcV,KAGnDT,EAAE,QAAQwB,eAAe,gBAEzBxB,EAAE,QAAQC,GAAG,QAAS,oBAAqBC,IACvC,MAAMuB,EAAUvB,EAAMwB,cAAcH,MAC9BI,EAAsB3B,EAAE,uBAhCtC,IAAmC4B,EAkCvB1B,EAAMwB,cAAcG,SAlCGD,EAmCUH,EAAhBP,EAlCjBY,KAAKF,IATjB,SAA0BrB,EAASqB,GAC/B,MAAMG,EAAQxB,EAAQyB,QAAQJ,GAE1BG,GAAS,GACTxB,EAAQ0B,OAAOF,EAAO,GAyClBG,CAAiBhB,EAAgBO,GAGrCnB,EAAiBY,EAAgBS,EAAqBlB,KAG1DT,EAAE,QAAQC,GAAG,SAAU,yBAA0BC,IAC/BF,EAAEE,EAAMwB,eACUX,KAAK,oCAEfX,QAAU,IAC5B,YAAe,oDACfF,EAAMG,oBAIdL,EAAE,QAAQC,GAAG,QAAS,sBAAuB,KAGzC,GAF6BD,EAAE,QAAQe,KAAK,oCAEnBX,QAAU,EAE/B,OADA,YAAe,qDACR,O","file":"theme-bundle.chunk.13.js","sourcesContent":["import PageManager from './page-manager';\r\nimport { showAlertModal } from './global/modal';\r\nimport compareProducts from './global/compare-products';\r\n\r\nexport default class Compare extends PageManager {\r\n    onReady() {\r\n        compareProducts(this.context.urls);\r\n\r\n        const message = this.context.compareRemoveMessage;\r\n\r\n        $('body').on('click', '[data-comparison-remove]', event => {\r\n            if (this.context.comparisons.length <= 2) {\r\n                showAlertModal(message);\r\n                event.preventDefault();\r\n            }\r\n        });\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport { showAlertModal } from './modal';\r\n\r\nfunction decrementCounter(counter, item) {\r\n    const index = counter.indexOf(item);\r\n\r\n    if (index > -1) {\r\n        counter.splice(index, 1);\r\n    }\r\n}\r\n\r\nfunction incrementCounter(counter, item) {\r\n    counter.push(item);\r\n}\r\n\r\nfunction updateCounterNav(counter, $link, urlContext) {\r\n    if (counter.length !== 0) {\r\n        if (!$link.is('visible')) {\r\n            $link.addClass('show');\r\n        }\r\n        $link.attr('href', `${urlContext.compare}/${counter.join('/')}`);\r\n        $link.find('span.countPill').html(counter.length);\r\n    } else {\r\n        $link.removeClass('show');\r\n    }\r\n}\r\n\r\nexport default function (urlContext) {\r\n    let compareCounter = [];\r\n\r\n    const $compareLink = $('a[data-compare-nav]');\r\n\r\n    $('body').on('compareReset', () => {\r\n        const $checked = $('body').find('input[name=\"products\\[\\]\"]:checked');\r\n\r\n        compareCounter = $checked.length ? _.map($checked, element => element.value) : [];\r\n        updateCounterNav(compareCounter, $compareLink, urlContext);\r\n    });\r\n\r\n    $('body').triggerHandler('compareReset');\r\n\r\n    $('body').on('click', '[data-compare-id]', event => {\r\n        const product = event.currentTarget.value;\r\n        const $clickedCompareLink = $('a[data-compare-nav]');\r\n\r\n        if (event.currentTarget.checked) {\r\n            incrementCounter(compareCounter, product);\r\n        } else {\r\n            decrementCounter(compareCounter, product);\r\n        }\r\n\r\n        updateCounterNav(compareCounter, $clickedCompareLink, urlContext);\r\n    });\r\n\r\n    $('body').on('submit', '[data-product-compare]', event => {\r\n        const $this = $(event.currentTarget);\r\n        const productsToCompare = $this.find('input[name=\"products\\[\\]\"]:checked');\r\n\r\n        if (productsToCompare.length <= 1) {\r\n            showAlertModal('You must select at least two products to compare');\r\n            event.preventDefault();\r\n        }\r\n    });\r\n\r\n    $('body').on('click', 'a[data-compare-nav]', () => {\r\n        const $clickedCheckedInput = $('body').find('input[name=\"products\\[\\]\"]:checked');\r\n\r\n        if ($clickedCheckedInput.length <= 1) {\r\n            showAlertModal('You must select at least two products to compare');\r\n            return false;\r\n        }\r\n    });\r\n}\r\n"],"sourceRoot":""}